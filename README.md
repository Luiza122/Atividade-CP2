# üßæ Atividade CP2 ‚Äî API REST de Professores (Spring Boot + Oracle)

## üìò Vis√£o Geral

Este projeto implementa uma **API REST** em **Spring Boot 3.2.7** para o gerenciamento de professores, permitindo realizar opera√ß√µes CRUD (Criar, Ler, Atualizar e Deletar) armazenando os dados em um banco de dados **Oracle**.

A aplica√ß√£o segue arquitetura em camadas (Controller ‚Üí Service ‚Üí Repository ‚Üí Model) e inclui **documenta√ß√£o autom√°tica com Swagger UI**, al√©m de uma **cole√ß√£o pronta para o Insomnia**.

---

## üß∞ Tecnologias Utilizadas

- ‚òï **Java 17**
- üå± **Spring Boot 3.2.7**
  - `spring-boot-starter-web`
  - `spring-boot-starter-jdbc`
- üêò **Oracle Database** + **JDBC Driver (ojdbc11 v23.5.0)**
- üìÑ **Springdoc OpenAPI** (`springdoc-openapi-starter-webmvc-ui`) ‚Äî para o Swagger UI
- üß© **Lombok**
- üß™ **JUnit 5 + Mockito**
- üíæ **H2 Database** (para testes locais)
- üß± **Maven** (com suporte ao Maven Wrapper)

---

## ‚öôÔ∏è Configura√ß√£o do Ambiente

### 1Ô∏è‚É£ Pr√©-requisitos

- Java 17+
- Maven 3.8+
- Banco Oracle acess√≠vel
- IDE (ex: IntelliJ IDEA, Eclipse ou VS Code)

### 2Ô∏è‚É£ Cria√ß√£o da Tabela

Execute o script `script.sql` no seu banco Oracle:

```sql
DROP TABLE PROFESSOR;

CREATE TABLE PROFESSOR (
    ID            NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME          VARCHAR2(150) NOT NULL,
    DEPARTAMENTO  VARCHAR2(150) NOT NULL,
    EMAIL         VARCHAR2(150) NOT NULL,
    TITULACAO     VARCHAR2(100) NOT NULL
);
```

---

## üîê Configura√ß√£o de Conex√£o (Oracle)

Voc√™ pode definir as vari√°veis de ambiente antes de executar o projeto:

### Linux / macOS:
```bash
export ORACLE_URL="jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl"
export ORACLE_USER="seu_usuario"
export ORACLE_PASSWORD="sua_senha"
```

### Windows (CMD):
```cmd
set ORACLE_URL=jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl
set ORACLE_USER=seu_usuario
set ORACLE_PASSWORD=sua_senha
```

Essas vari√°veis s√£o lidas pela classe `ConnectionFactory.java` (ou via `application.properties`).

---

## ‚ñ∂Ô∏è Como Executar o Projeto

### Op√ß√£o 1 ‚Äî Usando Maven Wrapper
```bash
./mvnw spring-boot:run
```

### Op√ß√£o 2 ‚Äî Executar JAR
```bash
./mvnw clean package
java -jar target/restapi-0.0.1-SNAPSHOT.jar
```

### Op√ß√£o 3 ‚Äî IntelliJ IDEA
1. Abra o projeto (`File > Open > pasta do projeto`);
2. Espere o Maven baixar as depend√™ncias;
3. Configure vari√°veis de ambiente se necess√°rio;
4. Rode a classe principal `RestapiApplication`.

A API ficar√° dispon√≠vel em:
> **http://localhost:8081/api/professores**

---

## üìö Endpoints da API

Base URL: `http://localhost:8081/api/professores`

| M√©todo | Endpoint | Descri√ß√£o |
|--------|-----------|------------|
| **GET** | `/` | Lista todos os professores |
| **GET** | `/{id}` | Busca um professor por ID |
| **POST** | `/` | Adiciona um novo professor |
| **PUT** | `/{id}` | Atualiza um professor existente |
| **DELETE** | `/{id}` | Remove um professor pelo ID |

---

### üßæ Exemplos de Requisi√ß√µes

#### üîπ Listar Professores
```bash
GET /api/professores
```
**Resposta:**
```json
[
  {
    "id": 1,
    "nome": "Fernando",
    "departamento": "Datascience",
    "email": "fernando@fiap.com",
    "titulacao": "Doutor"
  }
]
```

#### üîπ Buscar por ID
```bash
GET /api/professores/1
```

#### üîπ Adicionar Professor
```bash
POST /api/professores
Content-Type: application/json
```
**Body:**
```json
{
  "nome": "Fernando",
  "departamento": "Datascience",
  "email": "fernando@fiap.com",
  "titulacao": "Doutor"
}
```

#### üîπ Atualizar Professor
```bash
PUT /api/professores/1
Content-Type: application/json
```
**Body:**
```json
{
  "nome": "Luiza",
  "departamento": "Back-End",
  "email": "luiza@example.com",
  "titulacao": "Professora"
}
```

#### üîπ Deletar Professor
```bash
DELETE /api/professores/1
```

üì¶ **Cole√ß√£o Insomnia:**  
O arquivo [`Collection_Professor.json`](Collection_Professor.json) cont√©m todas as requisi√ß√µes configuradas (GET, POST, PUT, DELETE).  
Basta importar no **Insomnia** para testar diretamente.

---

## üß± Estrutura do Projeto

```
Atividade-CP2/
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ script.sql
‚îú‚îÄ‚îÄ Collection_Professor.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/java/com/fiap/restapi/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RestapiApplication.java        # Classe principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/ProfessorController.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/ProfessorService.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/ProfessorRepository.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/Professor.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/ConnectionFactory.java
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îî‚îÄ‚îÄ application.properties
‚îî‚îÄ‚îÄ target/
```

---

## üåê Swagger UI

Documenta√ß√£o autom√°tica da API:
> **http://localhost:8081/swagger-ui**

Especifica√ß√£o OpenAPI JSON:
> **http://localhost:8081/v3/api-docs**

---

## ‚ö†Ô∏è Poss√≠veis Erros e Solu√ß√µes

| Erro | Causa Prov√°vel | Solu√ß√£o |
|------|----------------|----------|
| `ORA-00942: table or view does not exist` | Tabela PROFESSOR n√£o criada | Execute o `script.sql` |
| `ORA-01017: invalid username/password` | Credenciais incorretas | Corrija as vari√°veis de ambiente |
| `Port 8081 already in use` | Outra aplica√ß√£o usa a porta | Altere `server.port` no `application.properties` |
| `500 Internal Server Error` | Falha de valida√ß√£o ou SQL | Verifique os campos JSON e logs no console |

---

## üìÑ Licen√ßa

Este projeto foi desenvolvido pela Luiza Macena
